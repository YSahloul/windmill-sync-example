summary: An unnecessarily branchy flow
description: ''
value:
  modules:
    - summary: ''
      value:
        content: |
          import * as wmill from 'https://deno.land/x/windmill@v1.27.2/mod.ts'
          import { sleep } from "https://deno.land/x/sleep/mod.ts";

          export async function main() {
            let result = []
            for (let i = 0; i < 10; i++) {
              console.log('I should sleep')
              result.push(i)
              await sleep(0.2)
            }
            return result
          }
        input_transforms: {}
        language: deno
        lock: ''
        type: rawscript
      id: ao
      input_transforms: {}
    - value:
        content: >
          // import * as wmill from
          "https://deno.land/x/windmill@v1.35.0/mod.ts"


          export async function main(x: string) {
            return x;
          }
        input_transforms:
          x:
            value: ''
            type: static
        language: deno
        lock: ''
        type: rawscript
      id: ap
      input_transforms: {}
    - value:
        iterator:
          expr: '[]'
          type: javascript
        modules:
          - value:
              content: >
                import * as wmill from
                'https://deno.land/x/windmill@v1.27.2/mod.ts'

                import { sleep } from "https://deno.land/x/sleep/mod.ts";


                export async function main() {
                  let result = []
                  for (let i= 0; i<10; i++) {
                  console.log('I should sleep')
                  result.push(i)
                  await sleep(0.2)
                  }
                  return result
                }
              input_transforms: {}
              language: deno
              type: rawscript
            id: ar
            input_transforms: {}
            stop_after_if:
              expr: result == undefined
              skip_if_stopped: false
          - value:
              content: >
                // import * as wmill from
                'https://deno.land/x/windmill@v1.31.0/mod.ts'


                export async function main(x: string) {
                  return x
                }
              input_transforms:
                x:
                  expr: >-
                    import { previous_result, flow_input, step, variable,
                    resource, params } from 'windmill@1-1'


                    `${flow_input.iter.value}`
                  type: javascript
              language: deno
              type: rawscript
            id: as
            input_transforms: {}
            stop_after_if:
              expr: stepresult == undefined
              skip_if_stopped: false
        parallel: false
        skip_failures: true
        type: forloopflow
      id: aq
      input_transforms: {}
    - summary: ''
      value:
        branches:
          - summary: ''
            modules:
              - value:
                  type: identity
                id: au
                input_transforms: {}
              - value:
                  type: identity
                id: av
                input_transforms: {}
            parallel: true
            skip_failure: false
          - summary: ''
            modules:
              - value:
                  type: identity
                id: aw
                input_transforms: {}
              - value:
                  type: identity
                id: ax
                input_transforms: {}
            parallel: true
            skip_failure: false
          - summary: ''
            modules:
              - value:
                  type: identity
                id: ay
                input_transforms: {}
              - summary: ''
                value:
                  branches:
                    - summary: ''
                      expr: 'true'
                      modules:
                        - value:
                            type: identity
                          id: ba
                          input_transforms: {}
                    - summary: ''
                      expr: 'true  '
                      modules:
                        - value:
                            type: identity
                          id: bb
                          input_transforms: {}
                  default:
                    - value:
                        iterator:
                          expr: previous_result
                          type: javascript
                        modules:
                          - value:
                              type: identity
                            id: bd
                            input_transforms: {}
                        parallel: false
                        skip_failures: true
                        type: forloopflow
                      id: bc
                      input_transforms: {}
                  type: branchone
                id: az
                input_transforms: {}
            parallel: true
            skip_failure: false
        parallel: false
        type: branchall
      id: at
      input_transforms: {}
schema:
  $schema: 'https://json-schema.org/draft/2020-12/schema'
  properties: {}
  required: []
  type: object
